version: "2.0"

stories:

# Status flow
- story: status without incident number
  steps:
  - or:
    - intent: claim_status
    - intent: claim_status_consultant_direct
    - intent: claim_status_manager_message
    - intent: claim_status_bot_info_inspection
    - intent: claim_status_bot_info_documents
    - intent: claim_status_bot_info_withdrawal
  - action: action_set_status_path
  - action: incident_number_form
  - active_loop: incident_number_form
  - active_loop: null
  - slot_was_set:
    - incident_number_verified: false
  - action: utter_status_transfer

- story: status without clarifying
  steps:
  - or:
    - intent: claim_status
    - intent: claim_status_consultant_direct
    - intent: claim_status_manager_message
    - intent: claim_status_bot_info_inspection
    - intent: claim_status_bot_info_documents
    - intent: claim_status_bot_info_withdrawal
  - action: action_set_status_path
  - action: incident_number_form
  - active_loop: incident_number_form
  - active_loop: null
  - slot_was_set:
    - incident_number_verified: true
  - action: action_set_status_path
  - slot_was_set:
    - status_path_flag: true
  - action: customer_authentication_form
  - active_loop: customer_authentication_form
  - active_loop: null
  - action: action_perform_customer_authentication
  - checkpoint: status_customer_authentication

- story: status with clarifying
  steps:
  - or:
    - intent: claim_status
    - intent: claim_status_consultant_direct
    - intent: claim_status_manager_message
    - intent: claim_status_bot_info_inspection
    - intent: claim_status_bot_info_documents
    - intent: claim_status_bot_info_withdrawal
  - action: action_set_status_path
  - action: incident_number_form
  - active_loop: incident_number_form
  - active_loop: null
  - slot_was_set:
    - incident_number_verified: true
  - action: action_set_status_path
  - slot_was_set:
    - status_path_flag: false
  - action: utter_clarify_question
  - or:
    - intent: claim_status
    - intent: claim_status_consultant_direct
    - intent: claim_status_manager_message
    - intent: claim_status_bot_info_inspection
    - intent: claim_status_bot_info_documents
    - intent: claim_status_bot_info_withdrawal
  - action: action_set_status_path
  - action: customer_authentication_form
  - active_loop: customer_authentication_form
  - active_loop: null
  - action: action_perform_customer_authentication
  - checkpoint: status_customer_authentication

- story: status authentication failed
  steps:
  - checkpoint: status_customer_authentication
  - slot_was_set:
    - customer_authenticated: false
  - action: utter_status_transfer

- story: status authentication succeed - consultant direct
  steps:
  - checkpoint: status_customer_authentication
  - slot_was_set:
    - customer_authenticated: true
  - action: action_set_status_path
  - slot_was_set:
    - status_path: "consultant_direct"
  - action: utter_status_transfer

- story: status authentication succeed - manager message
  steps:
  - checkpoint: status_customer_authentication
  - slot_was_set:
    - customer_authenticated: true
  - action: action_set_status_path
  - slot_was_set:
    - status_path: "manager_message"
  - action: utter_status_message

- story: status authentication succeed - bot info inspection
  steps:
  - checkpoint: status_customer_authentication
  - slot_was_set:
    - customer_authenticated: true
  - action: action_set_status_path
  - slot_was_set:
    - status_path: "bot_info_inspection"
  - action: action_select_utter_status_bot_info

- story: status authentication succeed - bot info documents
  steps:
  - checkpoint: status_customer_authentication
  - slot_was_set:
    - customer_authenticated: true
  - action: action_set_status_path
  - slot_was_set:
    - status_path: "bot_info_documents"
  - action: action_select_utter_status_bot_info

- story: status authentication succeed - bot info withdrawal
  steps:
  - checkpoint: status_customer_authentication
  - slot_was_set:
    - customer_authenticated: true
  - action: action_set_status_path
  - slot_was_set:
    - status_path: "bot_info_withdrawal"
  - action: action_select_utter_status_bot_info

