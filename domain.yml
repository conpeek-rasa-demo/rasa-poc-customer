version: "2.0"

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false

intents:
- interview
- connected
- disconnected
- asr_low_confidence
- inform
- goodbye
- affirm
- deny
- assistance_request
- claim_report
- claim_status_bot
- claim_status_consultant
- agent_insurance_info
- customer_insurance_info

entities:
- phone_number
- full_name
- time
- insurance_number
- insurance_type
- vehicle_registration_number

slots:
  customer_phone_number:
    type: any
    influence_conversation: false
  customer_full_name:
    type: any
    influence_conversation: false
  claim_report_form_confirm:
    type: any
    influence_conversation: false
  claim_report_form_counter:
    type: any
    influence_conversation: false

actions:

- validate_claim_report_form
- action_restarted
- action_low_confidence

forms:
  claim_report_form:
    required_slots:
      customer_full_name:
      - type: from_text
      customer_phone_number:
      - type: from_text
      claim_report_form_confirm:
      - type: from_text

responses:
  # UTTER -----------------------------------------------------------------------------
  utter_interview:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: "Bardzo mi się podoba"
  - text: "Bardzo mi się podoba"

  # UTTER -----------------------------------------------------------------------------
  utter_greet:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: "W czym mogę pomóc?"
  - text: "W czym mogę pomóc?"

  # UTTER -----------------------------------------------------------------------------
  utter_goodbye:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: "Do widzenia."
      end_of_conversation:
  - text: "Do widzenia."

  # UTTER -----------------------------------------------------------------------------
  utter_assistance_transfer:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: ""
      end_of_conversation:
        export:
          next_action: "call"
          call_number: "assistance"
  - text: ""

  # UTTER -----------------------------------------------------------------------------
  utter_ask_for_assistance:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: "Czy potrzebujesz Assistans?"
  - text: "Czy potrzebujesz Assistans?"

  # UTTER -----------------------------------------------------------------------------
  utter_ask_claim_report_form_claim_report_form_confirm:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: "Twoje imię i nazwisko to {customer_full_name}, a numer telefonu to {customer_phone_number}. Czy to się zgadza?"
  - text: "Twoje imię i nazwisko to {customer_full_name}, a numer telefonu to {customer_phone_number}. Czy to się zgadza?"

  # UTTER -----------------------------------------------------------------------------
  utter_ask_claim_report_form_customer_full_name:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: "Podaj proszę swoje imię i nazwisko."
  - text: "Podaj proszę swoje imię i nazwisko."

  # UTTER -----------------------------------------------------------------------------
  utter_ask_claim_report_form_customer_phone_number:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: "Podaj proszę swój numer telefonu. Możesz przy tym użyć klawiszy."
  - text: "Podaj proszę swój numer telefonu. Możesz przy tym użyć klawiszy."

  # UTTER -----------------------------------------------------------------------------
  utter_describe_incident:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: "Opowiedz krótko, co się stało? Co zostało uszkodzone?"
  - text: "Opowiedz krótko, co się stało? Co zostało uszkodzone?"

  # UTTER -----------------------------------------------------------------------------
  utter_ok:
  - channel: conpeek-voice
    custom:
      blocks:
      - text: "OK"
  - text: "OK"

